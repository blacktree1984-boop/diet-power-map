<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>AI解析：国会パワーバランス図</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { margin: 0; background: #222; color: #fff; font-family: sans-serif; }
        #main { width: 100vw; height: 100vh; }
        #info { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.7); padding: 20px; border-radius: 8px; pointer-events: none; }
        h1 { margin: 0; font-size: 20px; color: #00d2ff; }
    </style>
</head>
<body>
    <div id="info">
        <h1>国会パワーバランス解析</h1>
        <p>ノードの大きさ = ネットワーク中心性（潜在的な政治力）<br>線のつながり = 委員会・活動の共有</p>
    </div>
    <div id="main"></div>
    <script>
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const chart = echarts.init(document.getElementById('main'), 'dark');
                
                // カテゴリごとの色を定義
                data.nodes.forEach(n => {
                    n.label = { show: n.symbolSize > 30 }; // 力のある人だけ名前を表示
                });

                const option = {
                    tooltip: { formatter: '{b}<br>Power Score: {c}' },
                    legend: [{ data: data.categories.map(c => c.name) }],
                    series: [{
                        type: 'graph',
                        layout: 'force',
                        data: data.nodes,
                        links: data.links,
                        categories: data.categories,
                        roam: true,
                        force: { repulsion: 300, edgeLength: 100, gravity: 0.1 },
                        lineStyle: { color: 'source', curveness: 0.3, opacity: 0.4 }
                    }]
                };
                chart.setOption(option);
                window.addEventListener('resize', () => chart.resize());
            });
    </script>
</body>
</html>
